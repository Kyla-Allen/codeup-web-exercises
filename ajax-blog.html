<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ajax Blog</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="css/ajax.css">
</head>
<body>
<div class="container">
<div id="posts"></div>
<button class="btn"> Refresh </button>
</div>

<!--JS-->
<script src="js/jquery-2.x-git.js"></script>
<script>

    //updates the data
    function update (){
        var posts = $.ajax("data/blog.json", { //gets data
           "type": "GET"
        })

        posts.done(function (data) { //calls the function that builds the html
            $("#posts").html(buildHTML(data));
        })

        posts.fail(function (){
            alert("ERROR");
        })
    }

    //building html....
    function buildHTML (data){
        var html = '';
        data.forEach(function (item) {
            html += "<div class='card m-1'>";
            html += "<h1 class='card-title m-1'>" + item.title + "</h1>";
            html += "<p class='card-text m-2'>" + item.content + "</p>";
            html += "<ul>";
            item.categories.forEach(function (category){
             html += "<li>" + category + " </li>";
            })
            html += "</ul>";
            html += "<h6 class='m-2'>" + item.date + "</h6>";
            html += "</div>";
        })
        return html;
    }

    update();
    $("button").on('click', function (e) {
        update();
    })





</script>
</body>
</html>